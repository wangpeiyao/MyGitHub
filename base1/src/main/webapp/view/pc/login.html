<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Bootstrap的HTML标准模板</title>
		<!-- Bootstrap -->

		<link href="//cdn.staticfile.org/twitter-bootstrap/3.0.1/css/bootstrap.min.css" rel="stylesheet">
		<!--你自己的样式文件 -->
		<link href="../css/main.css" rel="stylesheet">
       <script>
       	function newWindow(){
       		window.location.href="regis.html";
       	}
       </script>
		<!-- 以下两个插件用于在IE8以及以下版本浏览器支持HTML5元素和媒体查询，如果不需要用可以移除 -->
		<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
	</head>

	<body style="background:url(../img/background-img.png) top left; background-size:100% 100%; background-attachment: fixed;">
		<div>
			<img id="QrGen" src="" />
		</div>
		<script type="text/javascript">  
			 $(document).ready(function() {
			    var uuid;
			    $.get("/qrgen?cmd=showQrGen", function(data, status) {
			        var obj = eval("(" + data + ")");
			        //设置该uuid值
			        uuid = obj.uuid;
			        //设置二维码图片地址
			        $("#QrGen").attr("src", obj.img);
			        //检查验证登录
			        checkScan();
			    });
			  
			    function checkScan() {
			        setInterval(function() {
			            $.get("/qrgenLogin/qrgen?cmd=checkScan&uuid=" + uuid,
			                    function(data, status) {
			                        if (data == "ok") {
			                            //验证成功并重定向到welcome页面
			                            window.location = "welcome.jsp";
			                        }
			                    });
			        },4000)
			    }
			    
			});
			</script>
	</body>

</html>